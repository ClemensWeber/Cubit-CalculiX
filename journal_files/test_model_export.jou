ccx use logfile core on
reset
create brick x 1

set duplicate block elements off
block 1 add volume 1

create vertex 2 0 0 
create vertex 0 2 0 

create material "s235" property_group "CalculiX-FEA"
modify material "s235" scalar_properties "CCX_ELASTIC_USE_CARD" 1
modify material "s235" scalar_properties "CCX_ELASTIC_ISO_USE_CARD" 1
modify material "s235" matrix_property "CCX_ELASTIC_ISO_MODULUS_VS_POISSON_VS_TEMPERATURE" 5454 0.3 0 
modify material "s235" scalar_properties "CCX_PLASTIC_ISO_USE_CARD" 1
modify material "s235" scalar_properties "CCX_EXPANSION_ISO_USE_CARD" 1
modify material "s235" scalar_properties "CCX_CONDUCTIVITY_ISO_USE_CARD" 1
modify material "s235" scalar_properties "CCX_DENSITY_USE_CARD" 1
modify material "s235" matrix_property "CCX_DENSITY_DENSITY" 7.9e-10 0 
ccx create section solid block 1 material 1

ccx create amplitude name amp1 time_amplitude 0 1 2 3 4 5 6 7 8 9 10 11 12 13
ccx create amplitude name amp2 time_amplitude 0 1 2 3 
ccx create amplitude name amp3 time_amplitude 0 1 2 3 

create force  on vertex 2 9 10 force value 1 moment value 2 direction 0 0 1 
modify force 1 name 'test' add vertex 5  
modify force 1 add surface 5
create force on curve 12 force value 55 direction 1 0 1
create pressure on surface 1 4 5 magnitude 20
modify pressure 1 name 'test_p'
ccx modify force 1 op new amplitude 2 timedelay -99.55
ccx modify pressure 1 op new amplitude 1 timedelay -55.1

create displacement  on surface 6  dof all fix 99 
modify displacement 1 name 'disp' 
modify displacement 1 add vertex 9
modify displacement 1 dof 1 fix 1
modify displacement 1 dof 4 fix 4
modify displacement 1 dof 5 fix 5
modify displacement 1 dof 6 fix 6
create displacement  on surface 6  dof all fix 0 
ccx modify displacement 2 op new amplitude 1 timedelay -55.1
create displacement on surface 5 dof all fix 55
modify displacement 2 add vertex 10

create surface circle radius 1 zplane 
create temperature  on surface 7  middle 1 gradient 22 

create heatflux  on surface 1 2 3 4  value 11
create heatflux  on surface 2  value 22
create heatflux  on surface 3  value 33
create heatflux  on surface 4  value 44
create temperature  on volume 1  value 22
create temperature  on surface 6  value 33
create temperature  on surface 6  value 44
create temperature  on surface 6  value 55
create temperature  on surface 6  value 66
modify temperature 2 name 'temp' 
ccx modify temperature 2 op new amplitude 1 timedelay -55.1

ccx create constraint rigid body nodeset 1 ref 9 rot 9
ccx create constraint rigid body nodeset 5 ref 10 rot 10

ccx create historyoutput name test_name1 node
ccx create historyoutput name test_name2 element
ccx create historyoutput name test_name3 contact
ccx create historyoutput name test_name1 node
ccx create historyoutput name test_name2 element
ccx create historyoutput name test_name3 contact
ccx create historyoutput name test_name1 node
ccx create historyoutput name test_name2 element
ccx create historyoutput name test_name3 contact
ccx modify historyoutput 1 node name juhey nodeset 1 frequency 22 frequencyf 11 totals_yes global_yes key_on u  nt tsf ttf pn psf ptf mach cp vf depf turb mf rf rfl
ccx modify historyoutput 2 element name juheys block 1 frequency 22 frequencyf 11 totals_yes global_yes key_on S SVF E ME PEEQ CEEQ ENER SDV HFL HFLF COORD ELSE ELKE EVOL EMAS EBHE CENT
ccx modify historyoutput 3 contact name juheyz contactpair 1 frequency 22 totals_yes global_yes key_on cdis cstr cels cnum cf cfn cfs

ccx create fieldoutput name fieldtest1 node
ccx create fieldoutput name fieldtest2 element
ccx create fieldoutput name fieldtest3 contact
ccx create fieldoutput name fieldtest1 node
ccx create fieldoutput name fieldtest2 element
ccx create fieldoutput name fieldtest3 contact
ccx create fieldoutput name fieldtest1 node
ccx create fieldoutput name fieldtest2 element
ccx create fieldoutput name fieldtest3 contact

ccx modify fieldoutput 1 node name fieldjuhi nodeset 1 frequency 22 frequencyf 33 totals_yes global_yes output_2d output_all_on last_iterations_on contact_elements_on key_on CP DEPF DEPT DTF HCRI KEQ MACH MAXU MF NT PNT POT PRF PS PSF PT PTF PU RF RFL SEN TS TSF TT TTF TURB U V VF
ccx modify fieldoutput 2 element name fieldjuhi nodeset 1 frequency 22 frequencyf 33 global_yes output_2d output_all_on section_forces_on last_iterations_on contact_elements_on key_on CEEQ E ECD EMFB EMFE ENER ERR HER HFL HFLF MAXE MAXS ME PEEQ PHS S SF SMID SNEG SPOS SVF SDV THE ZZS
ccx modify fieldoutput 3 contact name fieldcontact frequency 33 last_iterations_on contact_elements_on key_on cdis cstr cels pcon

ccx create initialcondition displacement
ccx create initialcondition temperature
ccx create initialcondition displacement
ccx create initialcondition temperature
ccx create initialcondition displacement
ccx create initialcondition temperature
ccx modify initialcondition 1 displacement bc_id 1
ccx modify initialcondition 5 displacement bc_id 2
ccx modify initialcondition 3 displacement bc_id 3
ccx modify initialcondition 2 temperature bc_id 6
ccx modify initialcondition 4 temperature bc_id 1
ccx modify initialcondition 6 temperature bc_id 3

ccx create step name stepname1 noanalysis
ccx create step name stepname2 static
ccx create step name stepname3 frequency
ccx create step name stepname4 buckle
ccx create step name stepname5 heattransfer
ccx create step name stepname6 coupledtemperaturedisplacement
ccx create step name stepname7 uncoupledtemperaturedisplacement
ccx create step name stepname8 static

ccx step 1 add load force 1 2  pressure 1 2 
ccx step 2 add load force 1 2  pressure 1 2 
ccx step 3 add load force 1 2  pressure 1 2 
ccx step 4 add load force 1 2  pressure 1 2 
ccx step 5 add load force 1 2  pressure 1 2 
ccx step 6 add load force 1 2  pressure 1 2
ccx step 7 add load force 1 2  pressure 1 2 
ccx step 4 remove load force 2  pressure 1 99

ccx step 1 add bc displacement 1 2 temperature 1 2
ccx step 2 add bc displacement 1 2 temperature 1 2
ccx step 3 add bc displacement 1 2 temperature 1 2
ccx step 4 add bc displacement 1 2 temperature 1 2
ccx step 5 add bc displacement 1 2 temperature 1 2
ccx step 6 add bc displacement 1 2 temperature 1 2
ccx step 7 add bc displacement 1 2 temperature 1 2
ccx step 4 remove bc displacement 1 99 temperature 2

ccx step 1 add load heatflux 1 2 3
ccx step 7 add load heatflux 1 2 3

ccx step 1 add historyoutput 1 2 3
ccx step 2 add historyoutput 1 2 3
ccx step 3 add historyoutput 1 2 3
ccx step 4 add historyoutput 1 2 3
ccx step 5 add historyoutput 1 2 3
ccx step 6 add historyoutput 1 2 3
ccx step 7 add historyoutput 1 2 3
ccx step 4 remove historyoutput 1

ccx step 1 add fieldoutput 1 2 3
ccx step 2 add fieldoutput 1 2 3
ccx step 3 add fieldoutput 1 2 3
ccx step 4 add fieldoutput 1 2 3
ccx step 5 add fieldoutput 1 2 3
ccx step 6 add fieldoutput 1 2 3
ccx step 7 add fieldoutput 1 2 3
ccx step 4 remove fieldoutput 1

ccx modify step 1 parameter name noanalysisstep perturbation_yes nlgeom_yes inc 1000 incf 99 thermalnetwork_yes amplitude_step shocksmoothing 0.22
ccx modify step 2 static name staticstep solver pastix direct_yes explicit_yes timereset_yes totaltimeatstart 1.25 initialtimeincrement 0.0001 timeperiodofstep 1.3 minimumtimeincrement 0.1 maximumtimeincrement 5.99 initialtimeincrementcfd 0.000001 
ccx modify step 3 frequency name frequencystep solver spooles storage_yes global_yes cycmpc_active eigenfrequencies 11 lower 5 upper 6
ccx modify step 4 buckle name bucklestep solver pardiso bucklingfactors 11.5 accuracy 0.11 lanczosvectors 1 maximumiterations 99.9
ccx modify step 5 heattransfer name heattransferstep solver pastix direct_yes steadystate_yes frequency_yes modaldynamic_yes storage_yes deltmx 2.1 timereset_yes totaltimeatstart 0.1 initialtimeincrement 0.1 timeperiodofstep 2 minimumtimeincrement 1 maximumtimeincrement 20
ccx modify step 6 coupledtemperaturedisplacement name coupledtemperaturedisplacementstep solver pastix direct_yes alpha 0.3 steadystate_yes deltmx 2 timereset_yes totaltimeatstart 1 compressible_yes initialtimeincrement 1 timeperiodofstep 2 minimumtimeincrement 3 maximumtimeincrement 5 initialtimeincrementcfd 1000
ccx modify step 7 uncoupledtemperaturedisplacement name uncoupledtemperaturedisplacementstep solver pastix direct_yes alpha 0.3 steadystate_yes deltmx 2 explicit_yes timereset_yes totaltimeatstart 1 initialtimeincrement 1 timeperiodofstep 2 minimumtimeincrement 3 maximumtimeincrement 5 

mesh vol 1
mesh surf all
mesh vertex all


ccx create customline name testname1 before elset item_id 1 cline 'block before 1'
ccx create customline name testname1 after elset item_id 1 cline 'block before 1'
ccx create customline name testname1 before nset item_id 1 cline 'block before 1'
ccx create customline name testname1 after nset item_id 1 cline 'block before 1'
ccx create customline name testname1 before sideset item_id 1 cline 'block before 1'
ccx create customline name testname1 after sideset item_id 1 cline 'block before 1'
ccx create customline name testname1 before material item_id 1 cline 'material 1'
ccx create customline name testname1 after material item_id 1 cline 'material 2'
ccx create customline name testname1 before section item_id 1 cline 'section 1'
ccx create customline name testname1 after section item_id 1 cline 'section 2'
ccx create customline name testname1 before constraint item_id 2 cline 'constraint 1'
ccx create customline name testname1 after constraint item_id 2 cline 'constraint 2'
ccx create customline name testname1 before surfaceinteraction item_id 1 cline 'surfaceinteraction 1'
ccx create customline name testname1 after surfaceinteraction item_id 1 cline 'surfaceinteraction 2'
ccx create customline name testname1 after contactpair item_id 2 cline 'contactpair 2'
ccx create customline name testname1 after amplitude item_id 3 cline 'amplitude 1'
ccx create customline name testname1 after initialcondition item_id 3 cline '#####init 1'

ccx create customline name testname1 before step_begin item_id 3 cline '#####init 1'
ccx create customline name testname1 after step_begin item_id 3 cline '#####init 1'
ccx create customline name testname1 before step_end item_id 7 cline '#####init 1'
ccx create customline name testname1 after step_end item_id 7 cline '#####init 1'


ccx create customline name testname1 before force item_id 1 cline '#####init 1'
ccx create customline name testname1 before pressure item_id 1 cline '#####init 1'
ccx create customline name testname1 before heatflux item_id 1 cline 'woooow'
ccx create customline name testname1 before displacement item_id 1 cline '#####init 1'
ccx create customline name testname1 before temperature item_id 1 cline '#####init 1'


ccx create customline name testname2 begin export cline 'export begin'
ccx create customline name testname3 end export cline 'export end' 

ccx hbc add bc displacement 1 2 temperature 2 3


#ccx modify customline 1 name 'asdasd'

export ccx "test_export.inp" overwrite

ccx create job name jobname1
ccx create job name jobname2 filepath "/home/user/test_achse.inp"

#ccx run job 1
#ccx run job 2
#ccx result ccx2paraview job 2









